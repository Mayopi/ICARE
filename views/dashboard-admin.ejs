<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>

    <!-- bootstrap cdn -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous" />

    <link rel="Icon" href="img/icare-logo.png" />

    <!-- css link -->
    <link rel="stylesheet" href="style/dashboard-admin.css" />

    <!-- Bootstrap Icon CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css" />
  </head>
  <body>
    <%- include('./layouts/dashboardnav-admin') %>

    <div class="area">
      <div class="container-fluid">
        <div class="row dashboard-header-content">
          <div class="col-sm-4">
            <div class="dashboard-header">
              <h1>Admin Dashboard</h1>
              <button class="dashboard-navbar-toggle"><i class="bi bi-caret-right-fill" id="arrow"></i></button>
            </div>
          </div>
        </div>
      </div>

      <div class="container breadcrumb">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item" aria-current="page">
              <a href="/">Home</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
          </ol>
        </nav>
      </div>

      <div class="container dashboard-admin-content" data-user="<%= user %>">
        <div class="analytical-container">
          <div class="row">
            <div class="col-sm-8 user-registered-analytic">
              <canvas id="user-registered"></canvas>
            </div>
            <div class="col-sm-4 some-data-analytic">
              <canvas id="some-data"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

    <script>
      const userRegisteredCanvas = document.getElementById("user-registered").getContext("2d");
      const dashboardAdminContent = document.querySelector(".dashboard-admin-content");
      const someDataCanvas = document.getElementById("some-data");

      const data = dashboardAdminContent.getAttribute("data-user");

      const date = new Date();
      const today = date.toLocaleString("en-us", {
        month: "long",
      });

      switch (today) {
        case "January":
          localStorage.setItem("Jan", data);
          break;
        case "February":
          localStorage.setItem("Feb", data);
          break;
        case "March":
          localStorage.setItem("Mar", data);
          break;
        case "April":
          localStorage.setItem("Apr", data);
          break;
        case "May":
          localStorage.setItem("May", data);
          break;
        case "June":
          localStorage.setItem("Jun", data);
          break;
        case "July":
          localStorage.setItem("Jul", data);
          break;
        case "August":
          localStorage.setItem("Aug", data);
          break;
        case "September":
          localStorage.setItem("Sep", data);
          break;
        case "October":
          localStorage.setItem("Oct", data);
          break;
        case "November":
          localStorage.setItem("Nov", data);
          break;
        case "December":
          localStorage.setItem("Dec", data);
          break;
      }

      const Jan = localStorage.getItem("Jan");
      const Feb = localStorage.getItem("Feb");
      const Mar = localStorage.getItem("Mar");
      const Apr = localStorage.getItem("Apr");
      const May = localStorage.getItem("May");
      const Jun = localStorage.getItem("Jun");
      const Jul = localStorage.getItem("Jul");
      const Aug = localStorage.getItem("Aug");
      const Sep = localStorage.getItem("Sep");
      const Oct = localStorage.getItem("Oct");
      const Nov = localStorage.getItem("Nov");
      const Dec = localStorage.getItem("Dec");

      const userRegistered = new Chart(userRegisteredCanvas, {
        type: "bar",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
          datasets: [
            {
              label: ["User Registered"],
              data: [Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec],
              backgroundColor: [
                today == "January" ? "#DD5353" : "#5F6F94",
                today == "February" ? "#DD5353" : "#5F6F94",
                today == "March" ? "#DD5353" : "#5F6F94",
                today == "April" ? "#DD5353" : "#5F6F94",
                today == "May" ? "#DD5353" : "#5F6F94",
                today == "June" ? "#DD5353" : "#5F6F94",
                today == "July" ? "#DD5353" : "#5F6F94",
                today == "August" ? "#DD5353" : "#5F6F94",
                today == "September" ? "#DD5353" : "#5F6F94",
                today == "October" ? "#DD5353" : "#5F6F94",
                today == "November" ? "#DD5353" : "#5F6F94",
                today == "December" ? "#DD5353" : "#5F6F94",
              ],
              borderColor: [
                today == "January" ? "#B73E3E" : "#2a2550",
                today == "February" ? "#B73E3E" : "#2a2550",
                today == "March" ? "#B73E3E" : "#2a2550",
                today == "April" ? "#B73E3E" : "#2a2550",
                today == "May" ? "#B73E3E" : "#2a2550",
                today == "June" ? "#B73E3E" : "#2a2550",
                today == "July" ? "#B73E3E" : "#2a2550",
                today == "August" ? "#B73E3E" : "#2a2550",
                today == "September" ? "#B73E3E" : "#2a2550",
                today == "October" ? "#B73E3E" : "#2a2550",
                today == "November" ? "#B73E3E" : "#2a2550",
                today == "December" ? "#B73E3E" : "#2a2550",
              ],
              borderWidth: 1,
              hoverBorderWidth: 3,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
          plugins: {
            title: {
              display: true,
              text: "User Registered",
            },
            subtitle: {},
          },
        },
      });

      const myChart = new Chart(someDataCanvas, {
        type: "pie",
        data: {
          labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
          datasets: [
            {
              label: "# of Votes",
              data: [12, 19, 3, 5, 2, 3],
              backgroundColor: ["rgba(255, 99, 132, 0.2)", "rgba(54, 162, 235, 0.2)", "rgba(255, 206, 86, 0.2)", "rgba(75, 192, 192, 0.2)", "rgba(153, 102, 255, 0.2)", "rgba(255, 159, 64, 0.2)"],
              borderColor: ["rgba(255, 99, 132, 1)", "rgba(54, 162, 235, 1)", "rgba(255, 206, 86, 1)", "rgba(75, 192, 192, 1)", "rgba(153, 102, 255, 1)", "rgba(255, 159, 64, 1)"],
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });
    </script>
  </body>
</html>
